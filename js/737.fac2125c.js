"use strict";(self["webpackChunkorigin"]=self["webpackChunkorigin"]||[]).push([[737],{4737:function(e,t,a){a.r(t),a.d(t,{default:function(){return be}});var i=a(6768),s=a(5130),r=a(4232);const n=e=>((0,i.Qi)("data-v-7d79f73a"),e=e(),(0,i.jt)(),e),l={class:"weather-view"},c=n((()=>(0,i.Lk)("header",{class:"page-header"},[(0,i.Lk)("h1",{class:"page-title"},"å¤©æ°”é¢„æŠ¥"),(0,i.Lk)("p",{class:"page-description"},"å®æ—¶å¤©æ°”ä¿¡æ¯ï¼Œä¸ºæ‚¨æä¾›å‡†ç¡®çš„å¤©æ°”é¢„æŠ¥æœåŠ¡")],-1))),o={class:"main-content"},h={class:"search-container"},d={class:"search-box"},p=n((()=>(0,i.Lk)("span",null,"æœç´¢",-1))),u=[p],m={class:"location-buttons"},v=n((()=>(0,i.Lk)("span",null,"ğŸ“",-1))),k={key:0,class:"loading-container"},g=n((()=>(0,i.Lk)("div",{class:"loading-spinner"},null,-1))),w=n((()=>(0,i.Lk)("p",null,"æ­£åœ¨åŠ è½½å¤©æ°”æ•°æ®...",-1))),y=[g,w],L={key:1,class:"error-container"},f={key:2,class:"weather-container"},_={class:"current-weather-card"},C={class:"weather-header"},D={class:"location-info"},M={class:"city-name"},b={class:"location-detail"},W={class:"weather-icon"},E={key:0,class:"icon-wrapper"},A=["src","alt"],x={key:1,class:"icon-emoji"},X={class:"temperature-section"},$={class:"main-temp"},I={key:0,class:"feels-like"},O={class:"description"},Q={class:"weather-details"},F={class:"detail-item"},K=n((()=>(0,i.Lk)("span",{class:"detail-label"},"æ¹¿åº¦",-1))),j={class:"detail-value"},z={class:"detail-item"},S=n((()=>(0,i.Lk)("span",{class:"detail-label"},"é£é€Ÿ",-1))),T={class:"detail-value"},P={class:"detail-item"},R=n((()=>(0,i.Lk)("span",{class:"detail-label"},"æ°”å‹",-1))),U={class:"detail-value"},q={class:"detail-item"},V=n((()=>(0,i.Lk)("span",{class:"detail-label"},"èƒ½è§åº¦",-1))),J={class:"detail-value"},N={key:0,class:"clothing-advice-card"},B={class:"advice-header"},G=n((()=>(0,i.Lk)("h3",{class:"advice-title"},"ğŸ‘” ç©¿è¡£æ¨è",-1))),H={class:"advice-content"},Y={class:"outfit-section"},Z=n((()=>(0,i.Lk)("h4",{class:"section-title"},"æ¨èç©¿æ­",-1))),ee={class:"outfit-tags"},te={key:0,class:"tips-section"},ae=n((()=>(0,i.Lk)("h4",{class:"section-title"},"æ¸©é¦¨æç¤º",-1))),ie={class:"tips-list"},se={key:1,class:"forecast-section"},re=n((()=>(0,i.Lk)("h3",{class:"forecast-title"},"æœªæ¥å‡ å¤©é¢„æŠ¥",-1))),ne={class:"forecast-list"},le={class:"forecast-date"},ce={class:"forecast-icon"},oe={key:0,class:"forecast-icon-wrapper"},he=["src","alt"],de={key:1,class:"forecast-icon-emoji"},pe={class:"forecast-temp"},ue={class:"temp-high"},me={class:"temp-low"},ve={class:"forecast-desc"},ke={key:3,class:"welcome-container"},ge=n((()=>(0,i.Lk)("div",{class:"welcome-icon"},"â˜€ï¸",-1))),we=n((()=>(0,i.Lk)("h3",null,"æ¬¢è¿ä½¿ç”¨å¤©æ°”é¢„æŠ¥",-1))),ye=n((()=>(0,i.Lk)("p",null,'è¯·è¾“å…¥åŸå¸‚åç§°æˆ–ç‚¹å‡»"è·å–å½“å‰ä½ç½®"æ¥æŸ¥çœ‹å¤©æ°”ä¿¡æ¯',-1))),Le=[ge,we,ye];function fe(e,t,a,n,p,g){return(0,i.uX)(),(0,i.CE)("div",l,[c,(0,i.Lk)("main",o,[(0,i.Lk)("div",h,[(0,i.Lk)("div",d,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>p.searchCity=e),type:"text",placeholder:"è¾“å…¥åŸå¸‚åç§°ï¼Œå¦‚ï¼šåŒ—äº¬ã€Shanghaiã€Tokyo",class:"search-input",onKeyup:t[1]||(t[1]=(0,s.jR)(((...e)=>g.searchWeather&&g.searchWeather(...e)),["enter"]))},null,544),[[s.Jo,p.searchCity]]),(0,i.Lk)("button",{class:"search-button",onClick:t[2]||(t[2]=(...e)=>g.searchWeather&&g.searchWeather(...e))},u)]),(0,i.Lk)("div",m,[(0,i.Lk)("button",{class:"location-btn",onClick:t[3]||(t[3]=(...e)=>g.getCurrentLocation&&g.getCurrentLocation(...e))},[v,(0,i.eW)(" è·å–å½“å‰ä½ç½® ")])])]),p.loading?((0,i.uX)(),(0,i.CE)("div",k,y)):(0,i.Q3)("",!0),p.error?((0,i.uX)(),(0,i.CE)("div",L,[(0,i.Lk)("p",null,(0,r.v_)(p.error),1),(0,i.Lk)("button",{class:"retry-button",onClick:t[4]||(t[4]=(...e)=>g.retry&&g.retry(...e))},"é‡è¯•")])):(0,i.Q3)("",!0),p.weatherData&&!p.loading?((0,i.uX)(),(0,i.CE)("div",f,[(0,i.Lk)("div",_,[(0,i.Lk)("div",C,[(0,i.Lk)("div",D,[(0,i.Lk)("h2",M,(0,r.v_)(p.weatherData.city),1),(0,i.Lk)("p",b,(0,r.v_)(p.weatherData.country),1)]),(0,i.Lk)("div",W,[p.weatherData.icon&&p.weatherData.icon.startsWith("http")?((0,i.uX)(),(0,i.CE)("span",E,[(0,i.Lk)("img",{src:p.weatherData.icon,alt:p.weatherData.description,class:"icon-img"},null,8,A)])):((0,i.uX)(),(0,i.CE)("span",x,(0,r.v_)(p.weatherData.icon||"â˜€ï¸"),1))])]),(0,i.Lk)("div",X,[(0,i.Lk)("div",$,(0,r.v_)(p.weatherData.temperature)+"Â°C",1),p.weatherData.feelsLike!==p.weatherData.temperature?((0,i.uX)(),(0,i.CE)("div",I,"ä½“æ„Ÿæ¸©åº¦: "+(0,r.v_)(p.weatherData.feelsLike)+"Â°C",1)):(0,i.Q3)("",!0),(0,i.Lk)("div",O,(0,r.v_)(p.weatherData.description),1)]),(0,i.Lk)("div",Q,[(0,i.Lk)("div",F,[K,(0,i.Lk)("span",j,(0,r.v_)(p.weatherData.humidity)+"%",1)]),(0,i.Lk)("div",z,[S,(0,i.Lk)("span",T,(0,r.v_)(p.weatherData.windSpeed)+" m/s",1)]),(0,i.Lk)("div",P,[R,(0,i.Lk)("span",U,(0,r.v_)(p.weatherData.pressure)+" hPa",1)]),(0,i.Lk)("div",q,[V,(0,i.Lk)("span",J,(0,r.v_)(p.weatherData.visibility)+" km",1)])])]),p.weatherData&&p.weatherData.clothingAdvice&&!p.loading?((0,i.uX)(),(0,i.CE)("div",N,[(0,i.Lk)("div",B,[G,(0,i.Lk)("span",{class:(0,r.C4)(["advice-level",g.getLevelClass(p.weatherData.clothingAdvice.level)])},(0,r.v_)(p.weatherData.clothingAdvice.level),3)]),(0,i.Lk)("div",H,[(0,i.Lk)("div",Y,[Z,(0,i.Lk)("div",ee,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(p.weatherData.clothingAdvice.outfit,((e,t)=>((0,i.uX)(),(0,i.CE)("span",{key:t,class:"outfit-tag"},(0,r.v_)(e),1)))),128))])]),p.weatherData.clothingAdvice.tips&&p.weatherData.clothingAdvice.tips.length>0?((0,i.uX)(),(0,i.CE)("div",te,[ae,(0,i.Lk)("ul",ie,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(p.weatherData.clothingAdvice.tips,((e,t)=>((0,i.uX)(),(0,i.CE)("li",{key:t,class:"tip-item"},(0,r.v_)(e),1)))),128))])])):(0,i.Q3)("",!0)])])):(0,i.Q3)("",!0),p.forecastData&&p.forecastData.length>0?((0,i.uX)(),(0,i.CE)("div",se,[re,(0,i.Lk)("div",ne,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(p.forecastData,((e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,class:"forecast-card"},[(0,i.Lk)("div",le,(0,r.v_)(e.date),1),(0,i.Lk)("div",ce,[e.icon&&e.icon.startsWith("http")?((0,i.uX)(),(0,i.CE)("span",oe,[(0,i.Lk)("img",{src:e.icon,alt:e.description},null,8,he)])):((0,i.uX)(),(0,i.CE)("span",de,(0,r.v_)(e.icon||"â˜€ï¸"),1))]),(0,i.Lk)("div",pe,[(0,i.Lk)("span",ue,(0,r.v_)(e.tempMax)+"Â°",1),(0,i.Lk)("span",me,"/ "+(0,r.v_)(e.tempMin)+"Â°",1)]),(0,i.Lk)("div",ve,(0,r.v_)(e.description),1)])))),128))])])):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0),p.weatherData||p.loading||p.error?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",ke,Le))])])}a(4114);var _e=a(4373),Ce={name:"WeatherView",data(){return{searchCity:"",weatherData:null,forecastData:[],loading:!1,error:null,apiKey:"",useOpenWeatherMap:!1}},mounted(){this.searchCity="åŒ—äº¬",this.searchWeather()},methods:{async searchWeather(){if(this.searchCity.trim()){this.loading=!0,this.error=null;try{this.useOpenWeatherMap&&this.apiKey?await this.fetchOpenWeatherMap():await this.fetchOpenMeteo()}catch(e){this.error="è·å–å¤©æ°”æ•°æ®å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–ç¨åé‡è¯•",console.error("Weather API Error:",e)}finally{this.loading=!1}}else this.error="è¯·è¾“å…¥åŸå¸‚åç§°"},async fetchOpenMeteo(){const e=encodeURIComponent(this.searchCity),t=await _e.A.get(`https://geocoding-api.open-meteo.com/v1/search?name=${e}&count=1&language=zh&format=json`,{timeout:1e4});if(!t.data.results||0===t.data.results.length)throw new Error("æœªæ‰¾åˆ°è¯¥åŸå¸‚");const a=t.data.results[0],i=a.latitude,s=a.longitude,r=a.name,n=a.country||"",l=await _e.A.get(`https://api.open-meteo.com/v1/forecast?latitude=${i}&longitude=${s}&current=temperature_2m,relative_humidity_2m,weather_code,wind_speed_10m,pressure_msl,visibility&daily=weather_code,temperature_2m_max,temperature_2m_min&timezone=Asia%2FShanghai&forecast_days=6`,{timeout:1e4}),c=l.data,o=c.current,h={0:"æ™´æœ—",1:"å¤§éƒ¨åˆ†æ™´æœ—",2:"éƒ¨åˆ†å¤šäº‘",3:"é˜´å¤©",45:"é›¾",48:"æ²‰ç§¯éœœé›¾",51:"å°é›¨",53:"ä¸­é›¨",55:"å¤§é›¨",56:"å†»é›¨",57:"å¼ºå†»é›¨",61:"å°é›¨",63:"ä¸­é›¨",65:"å¤§é›¨",66:"å†»é›¨",67:"å¼ºå†»é›¨",71:"å°é›ª",73:"ä¸­é›ª",75:"å¤§é›ª",77:"é›ªç²’",80:"å°é›¨",81:"ä¸­é›¨",82:"å¤§é›¨",85:"å°é›ª",86:"å¤§é›ª",95:"é›·æš´",96:"é›·æš´ä¼´å†°é›¹",99:"å¼ºé›·æš´ä¼´å†°é›¹"},d=o.weather_code,p=h[d]||"æœªçŸ¥",u=Math.round(o.temperature_2m),m=Math.round(10*o.wind_speed_10m)/10;this.weatherData={city:r,country:n,temperature:u,feelsLike:Math.round(o.temperature_2m),description:p,humidity:o.relative_humidity_2m,windSpeed:m,pressure:Math.round(o.pressure_msl),visibility:o.visibility?(o.visibility/1e3).toFixed(1):"N/A",icon:this.getWeatherIcon(d),weatherCode:d,clothingAdvice:this.getClothingAdvice(u,d,m,o.relative_humidity_2m)},c.daily&&c.daily.time&&(this.forecastData=c.daily.time.slice(1,6).map(((e,t)=>{const a=c.daily.weather_code[t+1];return{date:this.formatDate(e),tempMax:Math.round(c.daily.temperature_2m_max[t+1]),tempMin:Math.round(c.daily.temperature_2m_min[t+1]),description:h[a]||"æœªçŸ¥",icon:this.getWeatherIcon(a)}})))},getWeatherIcon(e){const t={0:"â˜€ï¸",1:"ğŸŒ¤ï¸",2:"â›…",3:"â˜ï¸",45:"ğŸŒ«ï¸",48:"ğŸŒ«ï¸",51:"ğŸŒ¦ï¸",53:"ğŸŒ¦ï¸",55:"ğŸŒ§ï¸",56:"ğŸŒ¨ï¸",57:"ğŸŒ¨ï¸",61:"ğŸŒ¦ï¸",63:"ğŸŒ§ï¸",65:"ğŸŒ§ï¸",66:"ğŸŒ¨ï¸",67:"ğŸŒ¨ï¸",71:"ğŸŒ¨ï¸",73:"ğŸŒ¨ï¸",75:"ğŸŒ¨ï¸",77:"ğŸŒ¨ï¸",80:"ğŸŒ¦ï¸",81:"ğŸŒ§ï¸",82:"ğŸŒ§ï¸",85:"ğŸŒ¨ï¸",86:"ğŸŒ¨ï¸",95:"â›ˆï¸",96:"â›ˆï¸",99:"â›ˆï¸"};return t[e]||"â˜€ï¸"},formatDate(e){const t=new Date(e),a=t.getMonth()+1,i=t.getDate(),s=["å‘¨æ—¥","å‘¨ä¸€","å‘¨äºŒ","å‘¨ä¸‰","å‘¨å››","å‘¨äº”","å‘¨å…­"],r=s[t.getDay()];return`${a}æœˆ${i}æ—¥ ${r}`},getClothingAdvice(e,t,a,i=null){const s=[51,53,55,56,57,61,63,65,66,67,80,81,82].includes(t),r=[71,73,75,77,85,86].includes(t),n=[95,96,99].includes(t),l=a>5;let c={level:"",outfit:[],tips:[]};return e<=0?(c.level="å¾ˆå†·",c.outfit=["åšç¾½ç»’æœ","ä¿æš–å†…è¡£","æ¯›è¡£","åšè£¤å­","ä¿æš–é´","å›´å·¾","æ‰‹å¥—","å¸½å­"],c.tips=["æ³¨æ„ä¿æš–ï¼Œé¿å…é•¿æ—¶é—´æˆ·å¤–æ´»åŠ¨"]):e<=10?(c.level="å†·",c.outfit=["ç¾½ç»’æœæˆ–åšå¤–å¥—","é•¿è¢–Tæ¤æˆ–æ¯›è¡£","é•¿è£¤","è¿åŠ¨é‹æˆ–é´å­"],l&&(c.outfit.push("é˜²é£å¤–å¥—"),c.tips.push("é£åŠ›è¾ƒå¤§ï¼Œå»ºè®®ç©¿é˜²é£è¡£ç‰©"))):e<=20?(c.level="å‡‰çˆ½",c.outfit=["è–„å¤–å¥—æˆ–é£è¡£","é•¿è¢–Tæ¤","é•¿è£¤","è¿åŠ¨é‹"],l&&(c.outfit.push("è–„å¤–å¥—"),c.tips.push("æœ‰é£ï¼Œå»ºè®®åŠ ä»¶è–„å¤–å¥—"))):e<=25?(c.level="èˆ’é€‚",c.outfit=["è–„é•¿è¢–æˆ–çŸ­è¢–","è–„é•¿è£¤æˆ–ä¹åˆ†è£¤","è¿åŠ¨é‹æˆ–ä¼‘é—²é‹"],c.tips=["å¤©æ°”èˆ’é€‚ï¼Œé€‚åˆæˆ·å¤–æ´»åŠ¨"]):e<=30?(c.level="æ¸©æš–",c.outfit=["çŸ­è¢–Tæ¤","çŸ­è£¤æˆ–è–„é•¿è£¤","å‡‰é‹æˆ–è¿åŠ¨é‹"],c.tips=["å¤©æ°”è¾ƒçƒ­ï¼Œæ³¨æ„é˜²æ™’"]):(c.level="ç‚çƒ­",c.outfit=["çŸ­è¢–Tæ¤","çŸ­è£¤","å‡‰é‹","é®é˜³å¸½"],c.tips=["å¤©æ°”ç‚çƒ­ï¼Œå»ºè®®ç©¿è½»è–„é€æ°”çš„è¡£ç‰©","æ³¨æ„é˜²æš‘é™æ¸©"]),s&&(c.outfit.push("é›¨è¡£æˆ–é›¨ä¼"),c.tips.push("æœ‰é›¨ï¼Œè®°å¾—å¸¦é›¨å…·")),r&&(c.outfit.push("é˜²æ»‘é´"),c.tips.push("æœ‰é›ªï¼Œæ³¨æ„é˜²æ»‘")),n&&c.tips.push("æœ‰é›·æš´ï¼Œå»ºè®®é¿å…æˆ·å¤–æ´»åŠ¨"),null!==i&&i>80&&(e<20?c.tips.push("æ¹¿åº¦è¾ƒé«˜ï¼Œä½“æ„Ÿä¼šæ›´å†·ï¼Œå»ºè®®å¤šç©¿ä¸€ä»¶"):e>25&&c.tips.push("æ¹¿åº¦è¾ƒé«˜ï¼Œä½“æ„Ÿä¼šæ›´çƒ­ï¼Œæ³¨æ„é˜²æš‘")),c},getWeatherCodeFromOpenWeather(e,t){return t>=200&&t<300?95:t>=300&&t<400?51:t>=500&&t<600?t<520?61:t<530?63:65:t>=600&&t<700?t<620?71:t<630?73:75:t>=700&&t<800?701===t||741===t?45:48:800===t?0:801===t?1:802===t?2:3},async fetchOpenWeatherMap(){const e=encodeURIComponent(this.searchCity),t=`https://api.openweathermap.org/data/2.5/weather?q=${e}&appid=${this.apiKey}&units=metric&lang=zh_cn`,a=`https://api.openweathermap.org/data/2.5/forecast?q=${e}&appid=${this.apiKey}&units=metric&lang=zh_cn`,[i,s]=await Promise.all([_e.A.get(t,{timeout:1e4}),_e.A.get(a,{timeout:1e4})]),r=i.data,n=s.data,l=Math.round(r.main.temp),c=this.getWeatherCodeFromOpenWeather(r.weather[0].main,r.weather[0].id);this.weatherData={city:r.name,country:r.sys.country,temperature:l,feelsLike:Math.round(r.main.feels_like),description:r.weather[0].description,humidity:r.main.humidity,windSpeed:r.wind.speed,pressure:r.main.pressure,visibility:(r.visibility/1e3).toFixed(1),icon:`https://openweathermap.org/img/wn/${r.weather[0].icon}@2x.png`,weatherCode:c,clothingAdvice:this.getClothingAdvice(l,c,r.wind.speed,r.main.humidity)};const o={};n.list.forEach((e=>{const t=e.dt_txt.split(" ")[0];o[t]?(o[t].tempMax=Math.max(o[t].tempMax,e.main.temp_max),o[t].tempMin=Math.min(o[t].tempMin,e.main.temp_min)):o[t]={date:t,tempMax:e.main.temp_max,tempMin:e.main.temp_min,description:e.weather[0].description,icon:`https://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png`}})),this.forecastData=Object.values(o).slice(0,5).map((e=>({...e,tempMax:Math.round(e.tempMax),tempMin:Math.round(e.tempMin)})))},async getCurrentLocation(){navigator.geolocation?(this.loading=!0,this.error=null,navigator.geolocation.getCurrentPosition((async e=>{try{const{latitude:t,longitude:a}=e.coords,i=await _e.A.get(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${t}&longitude=${a}&localityLanguage=zh`,{timeout:1e4}),s=i.data.city||i.data.locality||"å½“å‰ä½ç½®";this.searchCity=s,await this.searchWeather()}catch(t){this.error="æ— æ³•è·å–åŸå¸‚åç§°ï¼Œè¯·æ‰‹åŠ¨è¾“å…¥åŸå¸‚åç§°",this.loading=!1}}),(()=>{this.error="æ— æ³•è·å–æ‚¨çš„ä½ç½®ï¼Œè¯·å…è®¸ä½ç½®æƒé™æˆ–æ‰‹åŠ¨è¾“å…¥åŸå¸‚åç§°",this.loading=!1}))):this.error="æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒåœ°ç†ä½ç½®åŠŸèƒ½"},retry(){this.error=null,this.searchCity&&this.searchWeather()},getLevelClass(e){const t={"å¾ˆå†·":"level-very-cold","å†·":"level-cold","å‡‰çˆ½":"level-cool","èˆ’é€‚":"level-comfortable","æ¸©æš–":"level-warm","ç‚çƒ­":"level-hot"};return t[e]||"level-comfortable"}}},De=a(1241);const Me=(0,De.A)(Ce,[["render",fe],["__scopeId","data-v-7d79f73a"]]);var be=Me}}]);
//# sourceMappingURL=737.fac2125c.js.map